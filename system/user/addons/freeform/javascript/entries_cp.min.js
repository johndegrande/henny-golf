var suffix,doy,diff,days_in_month;(function($){var Freeform=window.Freeform||{};$(function(){var $form=$("#entry-filters");var $editLayout=$('a.btn[href="#edit_field_layout"]');var $exportEntries=$('a.btn[href="#export_entries"]');var $rangeStart=$("#search_date_range_start").hide();var $rangeEnd=$("#search_date_range_end").hide();var act=$form.attr("data-action");$form.on("click","#reset-search",function(e){e.preventDefault();var uri=window.location.href.replace(/#(.*)?$/i,"");var args=Freeform.getUrlArgs(uri);var nargs={};nargs["form_id"]=args["form_id"];window.location.href=act+"&"+$.param(nargs);return false});$form.on("submit",function(e){e.preventDefault();var uri=window.location.href.replace(/#(.*)?$/i,"");var args=Freeform.getUrlArgs(uri);var fargs=Freeform.getUrlArgs($form.serialize());for(var name in fargs){args[name]=fargs[name]}if(typeof args["msg"]!=="undefined"){delete args["msg"]}window.location.href=act+"&"+$.param(args);return false});$editLayout.on("click",function(e){e.preventDefault();$(".field-layout").trigger("modal:open");return false});$exportEntries.on("click",function(e){e.preventDefault();$(".export-entries").trigger("modal:open");return false});$("#search_date_range").change(function(){if($(this).val()=="date_range"){$rangeStart.show();$rangeEnd.show()}else{$rangeStart.hide().val("");$rangeEnd.hide().val("")}}).change();$("#save-layout-form").on("submit",function(e){e.preventDefault();var fields=[];var $form=$(this);var vars={};$(".choice.block.chosen a",$form).each(function(){fields.push($(this).attr("data-entry-id"))});vars["shown_fields[]"]=fields;$.each($form.serializeArray(),function(i,item){if(item.name.substr(-2)=="[]"){if(typeof vars[item.name]=="undefined"){vars[item.name]=[]}vars[item.name].push(item.value)}else{vars[item.name]=item.value}});vars["current_url"]=window.location.href;$.post($form.attr("action"),vars,function(data){if(data.success){window.location.reload();$(".field-layout").trigger("modal:close")}else{Freeform.showValidationErrors(data.errors)}},"json")})})})(jQuery);